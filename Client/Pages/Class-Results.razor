@page "/class-results/{AssignmentId:guid}"
@inject HttpClient Http
@inject ILocalStorageService LocalStorage
@inject NavigationManager NavManager

<PageTitle>View Class Results</PageTitle>

@if (results is not null)
{
    <ResultsTable Results="results"/>
}


@code
{
    [Parameter]
    public Guid AssignmentId { get; set; }

    private string[][]? results { get; set; }

    protected override async Task OnInitializedAsync()
    {
        results = await Http.GetFromJsonAsync<string[][]?>($"https://localhost:7053/Assignment/{AssignmentId}/Results");

        if (results is null)
        {
            Console.WriteLine($"ERROR: Assignment with id {AssignmentId} not found");
        }

        await base.OnInitializedAsync();
    }
}